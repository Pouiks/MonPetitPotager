{"ast":null,"code":"import _slicedToArray from\"/home/virgile/mpp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/home/virgile/mpp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _taggedTemplateLiteral from\"/home/virgile/mpp/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject;import React,{useState}from'react';import{slice}from'lodash';import{Box,Typography}from'@mui/material';import Text from'../Text';import ImgCal from'../ImgCal';import AddButton from'../AddButton';import DeleteButton from'../DeleteButton';import Button from'../Button';import LinkButton from'../LinkButton';import{styled}from'@mui/material/styles';import ArrowForwardIosSharpIcon from'@mui/icons-material/ArrowForwardIosSharp';import MuiAccordion from'@mui/material/Accordion';import MuiAccordionSummary from'@mui/material/AccordionSummary';import MuiAccordionDetails from'@mui/material/AccordionDetails';import Styled from'styled-components';import pxToRem from'../../Services/pxToRem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PictoCat=Styled.img(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n    width:\",\";\\n    height:auto;\\n    margin-right:\",\";\\n\"])),pxToRem(25),pxToRem(15));// For accordion\nvar Accordion=styled(function(props){return/*#__PURE__*/_jsx(MuiAccordion,_objectSpread({disableGutters:true,elevation:0,square:true},props));})(function(_ref){var theme=_ref.theme;return{border:\"1px solid \".concat(theme.palette.divider),'&:not(:last-child)':{borderBottom:0},'&:before':{display:'none'},borderLeft:'none',borderRight:'none'};});var AccordionSummary=styled(function(props){return/*#__PURE__*/_jsx(MuiAccordionSummary,_objectSpread({expandIcon:/*#__PURE__*/_jsx(ArrowForwardIosSharpIcon,{sx:{fontSize:'0.9rem'}})},props));})(function(_ref2){var theme=_ref2.theme;return{flexDirection:'row-reverse','& .MuiAccordionSummary-expandIconWrapper.Mui-expanded':{transform:'rotate(90deg)'},'& .MuiAccordionSummary-content':{marginLeft:theme.spacing(1)}};});var AccordionDetails=styled(MuiAccordionDetails)(function(_ref3){var theme=_ref3.theme;return{padding:theme.spacing(2),borderTop:'1px solid rgba(0, 0, 0, .125)'};});// Capitalize plants name\nvar capitalize=function capitalize(str){return str.charAt(0).toUpperCase()+str.slice(1);};var PlantsListMobile=function PlantsListMobile(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCompleted=_useState2[0],setIsCompleted=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),index=_useState4[0],setIndex=_useState4[1];var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),expanded=_React$useState2[0],setExpanded=_React$useState2[1];var handleChange=function handleChange(panel){return function(event,newExpanded){setExpanded(newExpanded?panel:false);};};// For list of plants\nvar plants=props.plants,userId=props.userId,addPlant=props.addPlant,deletePlant=props.deletePlant,userPlants=props.userPlants;if(!plants)return null;// For Load More Button\nvar initialPlants=slice(plants,0,index);var loadMore=function loadMore(){setIndex(index+5);if(index>=plants.length){setIsCompleted(true);}else{setIsCompleted(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"calendarMobile\",children:[initialPlants.map(function(plant){return/*#__PURE__*/_jsxs(Accordion,{expanded:expanded==='panel'+plant.id,onChange:handleChange('panel'+plant.id),children:[/*#__PURE__*/_jsx(AccordionSummary,{\"aria-controls\":\"panel1d-content\",id:'panel1'+plant.id+'header',children:/*#__PURE__*/_jsxs(Box,{sx:{ml:2,display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(PictoCat,{src:\"images/category_\"+plant.category_id+\".png\"}),/*#__PURE__*/_jsx(ImgCal,{src:plant.image_url}),/*#__PURE__*/_jsx(Typography,{sx:{ml:3},variant:\"h6\",children:capitalize(plant.name)})]})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Box,{sx:{margin:1,display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Text,{content:\"Catégorie : \"+plant.category_name}),/*#__PURE__*/_jsx(Text,{content:\"Semis : de \"+plant.start_sowing_month+\" à \"+plant.end_sowing_month}),/*#__PURE__*/_jsx(Text,{content:\"Récolte : de \"+plant.start_harvest_month+\" à \"+plant.end_harvest_month}),/*#__PURE__*/_jsx(Typography,{sx:{fontWeight:'bold',mt:3},children:\"Description\"}),/*#__PURE__*/_jsx(Text,{margin:\"0 0 1.2rem 0\",content:plant.description}),/*#__PURE__*/_jsx(LinkButton,{content:\"Consulter\",link:\"/calendrier/\".concat(plant.id)})]}),userId&&/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(AddButton,{content:\"-\",alt:\"Ajouter\",title:\"Ajouter\",onClick:function onClick(){return addPlant(plant.id);}}),userPlants.map(function(element){if(plant.id===element.plant_id){return/*#__PURE__*/_jsx(DeleteButton,{content:\"-\",alt:\"Supprimer\",title:\"Supprimer\",onClick:function onClick(){return deletePlant(plant.id);}});}})]})]})})]},'panel1'+plant.id);}),/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center'},children:isCompleted?/*#__PURE__*/_jsx(Button,{content:\"FIN\",onClick:loadMore}):/*#__PURE__*/_jsx(Button,{content:\"Voir +\",onClick:loadMore})})]});};export default PlantsListMobile;","map":{"version":3,"names":["React","useState","slice","Box","Typography","Text","ImgCal","AddButton","DeleteButton","Button","LinkButton","styled","ArrowForwardIosSharpIcon","MuiAccordion","MuiAccordionSummary","MuiAccordionDetails","Styled","pxToRem","PictoCat","img","Accordion","props","theme","border","palette","divider","borderBottom","display","borderLeft","borderRight","AccordionSummary","fontSize","flexDirection","transform","marginLeft","spacing","AccordionDetails","padding","borderTop","capitalize","str","charAt","toUpperCase","PlantsListMobile","isCompleted","setIsCompleted","index","setIndex","expanded","setExpanded","handleChange","panel","event","newExpanded","plants","userId","addPlant","deletePlant","userPlants","initialPlants","loadMore","length","map","plant","id","ml","alignItems","category_id","image_url","name","margin","justifyContent","category_name","start_sowing_month","end_sowing_month","start_harvest_month","end_harvest_month","fontWeight","mt","description","element","plant_id"],"sources":["/home/virgile/mpp/src/Components/PlantsListMobile/index.js"],"sourcesContent":["import React, { useState }  from 'react';\nimport { slice } from 'lodash';\nimport { Box, Typography } from '@mui/material';\nimport Text from '../Text'\nimport ImgCal from '../ImgCal';\nimport AddButton from '../AddButton';\nimport DeleteButton from '../DeleteButton';\nimport Button from '../Button';\nimport LinkButton from '../LinkButton';\nimport { styled } from '@mui/material/styles';\nimport ArrowForwardIosSharpIcon from '@mui/icons-material/ArrowForwardIosSharp';\nimport MuiAccordion from '@mui/material/Accordion';\nimport MuiAccordionSummary from '@mui/material/AccordionSummary';\nimport MuiAccordionDetails from '@mui/material/AccordionDetails';\nimport PropTypes from 'prop-types';\nimport Styled from 'styled-components';\nimport pxToRem from '../../Services/pxToRem';\n\nconst PictoCat = Styled.img`\n    width:${pxToRem(25)};\n    height:auto;\n    margin-right:${pxToRem(15)};\n`;\n\n// For accordion\nconst Accordion = styled((props) => (\n  <MuiAccordion disableGutters elevation={0} square {...props} />\n))(({ theme }) => ({\n  border: `1px solid ${theme.palette.divider}`,\n  '&:not(:last-child)': {\n    borderBottom: 0,\n  },\n  '&:before': {\n    display: 'none',\n  },\n  borderLeft: 'none',\n  borderRight: 'none',\n\n}));\n\nconst AccordionSummary = styled((props) => (\n  <MuiAccordionSummary\n    expandIcon={<ArrowForwardIosSharpIcon sx={{ fontSize: '0.9rem' }} />}\n    {...props}\n  />\n))(({ theme }) => ({\n  flexDirection: 'row-reverse',\n  '& .MuiAccordionSummary-expandIconWrapper.Mui-expanded': {\n    transform: 'rotate(90deg)',\n  },\n  '& .MuiAccordionSummary-content': {\n    marginLeft: theme.spacing(1),\n  },\n}));\n\nconst AccordionDetails = styled(MuiAccordionDetails)(({ theme }) => ({\n  padding: theme.spacing(2),\n  borderTop: '1px solid rgba(0, 0, 0, .125)',\n}));\n\n// Capitalize plants name\nconst capitalize = (str) => {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nconst PlantsListMobile = (props) => {\n\n    const [isCompleted, setIsCompleted] = useState(false)\n    const [index, setIndex] = useState(5)\n    const [expanded, setExpanded] = React.useState('');\n\n    const handleChange = (panel) => (event, newExpanded) => {\n        setExpanded(newExpanded ? panel : false);\n    };\n\n    // For list of plants\n    const {plants, userId, addPlant, deletePlant, userPlants} = props;\n\n      if (!plants) return null;\n\n    // For Load More Button\n    const initialPlants = slice(plants, 0, index)\n    const loadMore = () => {\n    setIndex(index + 5)\n        if (index >= plants.length) {\n            setIsCompleted(true)\n        } else {\n            setIsCompleted(false)\n        }\n    }\n\n  return (\n    <div className='calendarMobile'>\n        {initialPlants.map((plant) => (\n        <Accordion expanded={expanded === 'panel' + plant.id} key={'panel1'+ plant.id} onChange={handleChange('panel'+ plant.id)}>\n            <AccordionSummary aria-controls=\"panel1d-content\" id={'panel1'+ plant.id+'header'}>\n               <Box sx={{ ml:2, display: 'flex', alignItems: 'center' }}>\n                    <PictoCat src={\"images/category_\"+plant.category_id+\".png\"}/>\n                    <ImgCal src={plant.image_url} />\n                    <Typography sx={{ml:3}} variant=\"h6\">{capitalize(plant.name)}</Typography>\n                </Box>\n            </AccordionSummary>\n            <AccordionDetails>\n                <Box sx={{ margin: 1, display:'flex', justifyContent: 'space-between' }}>\n                    <Box>\n                        <Text\n                            content={\"Catégorie : \" + plant.category_name}/>\n                        <Text\n                            content={\"Semis : de \" + plant.start_sowing_month + \" à \" + plant.end_sowing_month}/>\n                        <Text\n                            content={\"Récolte : de \" + plant.start_harvest_month +\" à \"+ plant.end_harvest_month}/>\n                        <Typography sx={{fontWeight: 'bold', mt:3}}>Description</Typography>\n                        <Text margin='0 0 1.2rem 0'\n                            content = {plant.description} />\n                        <LinkButton\n                            content = 'Consulter'\n                            link={`/calendrier/${plant.id}`}\n                        />\n                    </Box>\n                    {userId && \n                    <Box>\n                        <AddButton\n                            content=\"-\"\n                            alt=\"Ajouter\"\n                            title=\"Ajouter\"\n                            onClick={() => addPlant(plant.id)} />\n                        \n                        {userPlants.map((element) => {\n                          if (plant.id === element.plant_id) {\n                            return <DeleteButton\n                              content=\"-\"\n                              alt=\"Supprimer\"\n                              title=\"Supprimer\"\n                              onClick={() => deletePlant(plant.id)} />\n                            }\n                          })\n                        }\n                    </Box>\n                    }\n                </Box>\n            </AccordionDetails>\n        </Accordion>\n        ))}\n         <Box sx={{display:'flex', justifyContent:'center'}}>\n            {isCompleted ? (\n            <Button content=\"FIN\" onClick={loadMore} />\n            ) : (\n            <Button content=\"Voir +\" onClick={loadMore} />\n            )}\n        </Box>\n    </div>\n  )\n}\n\nPlantsListMobile.propTypes = {\n  plants: PropTypes.array.isRequired\n}\n\nexport default PlantsListMobile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}